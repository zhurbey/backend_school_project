# Backend school intro project


## Setup and run

Проект представляет собой python пакет, для его установки в терминале нужно выполнить команду
`pip install .`. Для установки в dev режиме с возомжностью форматирования кода без переустановки
пакета можно использовать команду `pip install -e .`.  
Для запуска сервера после установки нужно ввести команду `backend_school`, сервер будет 
слушать соединения на порте 8080.


## Project structure

db - соединение с базой данных, описание таблиц, конфигурация и миграции alembic  
api - инициализация сервера и входная функция для поднятия сервера  
api.handlers - реализованные обработчики со связанной с ними логикой. Самы обработчики лежат  
в api.handlers.<name>.endpoints В каждой из папок следующая файловая структура:  
   * handlers - реализованные обработичики запросов  
   * queries - запросы к БД. Запросы выделяются в отдельный модуль от ручек в связи с возможной
   необходимостью переиспользования запросов  
   * datatypes - типы данных, в основном pydantic типы с валидацией  
   * constants - константы  
   * utils - логика предметной области(например функции расчета рейтинга курьеров, подбора заказов)
   
в api.handlers.base хранится общая логика, базовые view, шаблоны часто исполняемых запросов к БД.


## Tables
В таблице bundles поле is_finished говорит закончен ли развоз, по сути эта информация является
проивзодной - можно определить посмотрев на наличие времени окончания каждого из заказов в развозе,
однако такой запрос кажется достаточно тяжелым, для простого поиска активного развоза я и 
добавил этот столбец.
